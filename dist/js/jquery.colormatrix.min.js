/*!
----------------------------------
jquery.colorMatrix.js
----------------------------------
version:        1.1.1
last update:    May 7th, 2015
author:         Maarten Zilverberg
tested:         Webkit, FF31+, IE8+
----------------------------------
 */
!function(a,b,c){var d,e,f,g;g="colorMatrix",d={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},f={className:"grayscale",type:"saturate",ids:["desaturate","normal"],values:[0,1]},e=function(){function e(b,c){this.element=b,this.settings=a.extend({},f,c),this._defaults=f,this._name=g,this.init()}return e.prototype.cssFiltersSupported=function(){var b,d,e,f,g;return e=c.createElement("div"),g=" -webkit- -moz- -o- -ms- ".split(" "),e.style.cssText=g.join("filter: blur(2px); "),f=a(this.element).addClass(this.settings.className).css("filter"),b=!!e.style.length||"none"!==f,d="undefined"==typeof c.documentMode||c.documentMode>9,b&&d},e.prototype.svgSupported=function(){return c.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},e.prototype.isOldIE=function(){return c.documentMode<=9},e.prototype.checkImage=function(){var a,c,d;return d=this,c=0,(a=function(){return c++,d.completeImage()?!0:100>=c?void b.setTimeout(a,100):!0})()},e.prototype.completeImage=function(){return this.element.complete?"undefined"!=typeof this.element.naturalWidth&&0===this.element.naturalWidth?!1:!0:!1},e.prototype.createSVG=function(b,e,f){var g,h;return h=c.createElementNS(d.svg,"svg"),h.setAttribute("width",e),h.setAttribute("height",f),g=a(h),this.createSVGDefinitions(g,b),this.addImage(g,b,e,f),g},e.prototype.createSVGDefinitions=function(a,b){var e,f,g,h;for(e=c.createElementNS(d.svg,"defs"),g=0;2>g;)f=c.createElementNS(d.svg,"filter"),f.setAttribute("id",this.settings.ids[g]),h=c.createElementNS(d.svg,"feColorMatrix"),h.setAttribute("type",this.settings.type),h.setAttribute("values",this.settings.values[g]),f.appendChild(h),e.appendChild(f),g++;a[0].appendChild(e)},e.prototype.addImage=function(a,b,e,f){var g,h,i,j,k;h={id:b,"class":this.settings.className,width:e,height:f,x:0,y:0,href:[this.element.src,d.xlink],visibility:"visible"},j=function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=c.createElementNS(d.svg,"image");for(k in h)h.hasOwnProperty(k)&&(g={namespace:j(h[k])?h[k][1]:null,value:j(h[k])?h[k][0]:h[k]},i.setAttributeNS(g.namespace,k,g.value));a.append(i)},e.prototype.apply=function(){var b,c,d,e;if(e=this.element.width,c=this.element.height,d="img_"+Math.random().toString(36).substr(2,9),this.cssFiltersSupported()||this.isOldIE())return void a(this.element).addClass(this.settings.className);if(!this.svgSupported())throw new Error(g+".js: SVG is not supported by this browser");return b=this.createSVG(d,e,c),a(this.element).hide().after(b)},e.prototype.init=function(){return this.checkImage(this.element)?this.apply():void 0},e}(),a.fn[g]=function(b){return this.each(function(){return a.data(this,"plugin_"+g)?void 0:a.data(this,"plugin_"+g,new e(this,b))})},a(b).on("load",function(){return a("."+f.className)[g]()})}(jQuery,window,document);